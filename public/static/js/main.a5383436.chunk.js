(this["webpackJsonpReviewHunt-client"]=this["webpackJsonpReviewHunt-client"]||[]).push([[0],{38:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(21),s=n.n(r),c=(n(38),n(19)),o=n(5),l=n(6),u=n(8),j=n(7),d=n(9),h=n(11),b=n.n(h),p="https://reviewhunt.herokuapp.com",O=n(98),g=n(99),m=n(10),f=n(1);var x=function(e){return Object(f.jsxs)(O.a,{bg:"light",expand:"lg",children:[Object(f.jsx)("img",{src:"/images/logo.png",alt:"",class:"logo"}),Object(f.jsx)(O.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsx)(g.a,{className:"mr-auto",children:e.user?Object(f.jsx)("button",{onClick:e.onLogout,children:"Log Out"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{children:Object(f.jsx)(m.b,{to:"/signin",class:"button",children:"Log In"})}),Object(f.jsx)("button",{children:Object(f.jsx)(m.b,{to:"/signup",class:"button",children:"Register"})})]})})})]})};var v=function(e){return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("form",{onSubmit:e.onSignUp,className:"form-signup",children:[Object(f.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Sign Up"}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col",children:[Object(f.jsx)("label",{htmlFor:"InputUsername",children:"Username"}),Object(f.jsx)("input",{name:"username",type:"text",id:"InputUsername"}),Object(f.jsx)("label",{htmlFor:"InputEmail",children:"Email"}),Object(f.jsx)("input",{name:"email",type:"email",id:"InputEmail"}),Object(f.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(f.jsx)("input",{name:"password",type:"password",id:"InputPassword"})]})}),e.error?Object(f.jsx)("p",{style:{color:"green"},children:e.error.errorMessage}):null,Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create an account"}),Object(f.jsxs)("p",{children:["Already have an account!",Object(f.jsx)(m.b,{style:{marginLeft:"10px"},to:"/signin",children:"LogIn"})]})]})})};var y=function(e){return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("form",{onSubmit:e.onSignIn,children:[Object(f.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Log In"}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col",children:[Object(f.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(f.jsx)("input",{name:"email",type:"email",id:"InputEmail"}),Object(f.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(f.jsx)("input",{name:"password",type:"password",id:"InputPassword"}),e.error?Object(f.jsx)("p",{style:{color:"green"},children:e.error.error}):null,Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Log In"})]})}),Object(f.jsxs)("p",{children:["Don't have an account!",Object(f.jsx)(m.b,{style:{marginLeft:"10px"},to:"/signup",children:"SignUp"})]})]})})},w=n(35),S=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("input",{onChange:this.props.myChange,type:"text",placeholder:"Search food"})})}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("input",{onChange:this.props.mySubmit,type:"number",placeholder:"Search by rating"})})}}]),n}(a.Component),C=n(90),k=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){!function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://widget.kommunicate.io/v2/kommunicate.app",document.getElementsByTagName("head")[0].appendChild(n),window.kommunicate=t,t._globals={appId:"231e3f56632452a00cc0a81b0d2d11fd1",popupWidget:!0,automaticChatOpenOnNavigation:!0}}(document,window.kommunicate||{})}},{key:"render",value:function(){return Object(f.jsx)("div",{})}}]),n}(a.Component),U=n(89),D=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={loggedInUser:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.id;b.a.get("".concat(p,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){console.log("Detail fecth failed")}))}},{key:"render",value:function(){var e=this.state.loggedInUser,t=this.props.onDelete;return e?Object(f.jsxs)("div",{children:[Object(f.jsxs)("h4",{children:[" Welcome to your Profile ",e.username," !"]}),Object(f.jsxs)("div",{children:["Name:",e.username]}),Object(f.jsxs)("div",{children:["Email:",e.email," "]}),Object(f.jsxs)("div",{children:["Country:",e.country]}),Object(f.jsxs)("div",{children:["Favorite Cuisine: ",e.favorite]}),Object(f.jsx)("img",{src:e.profileimage,alt:""}),Object(f.jsx)("div",{children:" Your reviews "}),e.reviews.map((function(e){return Object(f.jsxs)("div",{children:[" ",Object(f.jsxs)("section",{children:[Object(f.jsxs)("h3",{children:[" ",e.restaurantName," at ",e.restaurantLocation]}),Object(f.jsx)("h3",{children:e.title}),Object(f.jsxs)("h5",{children:[" ",e.description]}),Object(f.jsxs)("h5",{children:[" ",e.rating," ",Object(f.jsx)(C.a,{height:"10px",color:"blue"})," "]}),Object(f.jsx)("img",{src:e.image,alt:"profileImage"})]})]})})),Object(f.jsx)(m.b,{to:"/user/".concat(e._id),children:"Update account "}),Object(f.jsx)("button",{onClick:function(){t(e._id)},children:"Delete"})]}):Object(f.jsx)(U.a,{})}}]),n}(a.Component),L=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={businesses:[],filteredBusinesses:[],loaded:!1},e.handleSearchFood=function(t){var n=t.target.value.toLowerCase(),a=e.state.businesses.filter((function(e){return e.categories[0].title.toLowerCase().includes(n)}));e.setState({filteredBusinesses:a})},e.handleSearchRate=function(t){var n=t.target.value,a=e.state.businesses.filter((function(e){return console.log(n),console.log(e.rating),e.rating>=n}));e.setState({filteredBusinesses:a})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(p,"/api/businesses")).then((function(t){console.log(t.data),e.setState({businesses:t.data.businesses,filteredBusinesses:t.data.businesses,loaded:!0})})).catch((function(e){console.log("err featching data",e)}))}},{key:"render",value:function(){var e=this.state,t=e.filteredBusinesses;return 0==e.loaded?Object(f.jsx)("p",{children:" Loading.."}):Object(f.jsxs)("div",{children:[Object(f.jsx)(m.b,{to:"/profile",children:Object(f.jsx)("button",{children:"Profile"})}),Object(f.jsx)("h4",{children:"Restaurants"}),Object(f.jsx)(S,{myChange:this.handleSearchFood}),Object(f.jsx)(I,{mySubmit:this.handleSearchRate}),t.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("h3",{children:["Name: ",e.name," "]}),Object(f.jsxs)("h4",{children:["Location: ",e.location.city,", ",e.location.address1]}),Object(f.jsxs)("h4",{children:[" Cuisine: ",e.categories[0].title]}),Object(f.jsx)("h4",{children:e.terms}),Object(f.jsxs)("h5",{children:[" Rating: ",e.rating," ",Object(f.jsx)(C.a,{height:"10px",color:"blue"})," "]}),Object(f.jsx)("img",{class:"img",src:e.image_url}),Object(f.jsx)(m.b,{to:"/businesses/".concat(e.id),children:Object(f.jsx)("h5",{children:" More details"})})]},e.id)})),Object(f.jsx)(k,{})]})}}]),n}(a.Component),N=n(91),P=n(92),A=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={ratingCategory:0,complete:!1},e.handleSubmit=function(t){t.preventDefault();var n=t.target.title.value,a=t.target.description.value,i=t.target.date.value,r=t.target.image.files[0],s=e.props.match.params.restaurantId,c=new FormData;c.append("imageUrl",r),b.a.post("".concat(p,"/api/upload"),c).then((function(t){b.a.post("".concat(p,"/api/add-review"),{image:t.data.image,title:n,description:a,date:i,rating:e.state.ratingCategory,restaurantId:s},{withCredentials:!0}).then((function(t){e.setState({reviews:t.data,complete:!0}),setTimeout((function(){e.props.history.push("/businesses/".concat(s))}),3e3)}))})).catch((function(e){console.log("adding review failed",e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[this.state.complete?Object(f.jsxs)("h4",{children:["Thank you for your review!",Object(f.jsx)(N.a,{color:"darkred",height:"10px"})]}):null,Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("label",{children:" Title of your review "}),Object(f.jsx)("input",{name:"title",type:"text",placeholder:"Summarize your visit"}),Object(f.jsx)("label",{children:" Your review "}),Object(f.jsx)("input",{name:"description",type:"text",placeholder:"Describe your experience"}),Object(f.jsx)("label",{children:" Review date "}),Object(f.jsx)("input",{type:"date",name:"date"}),Object(f.jsxs)("label",{for:"photo",children:[" ","Do you have photos to share? (only in jpg or png format)"]}),Object(f.jsx)("input",{type:"file",name:"image",autocomplete:"off"}),Object(f.jsx)("label",{children:" Give a rating "}),Object(f.jsx)(w.a,{name:"rating",emptySymbol:Object(f.jsx)(P.a,{color:"darkblue"}),fullSymbol:Object(f.jsx)(C.a,{color:"blue"}),initialRating:this.state.ratingCategory,onClick:function(t){e.setState({ratingCategory:t})}}),Object(f.jsxs)("span",{children:[" ",this.state.ratingCategory]}),Object(f.jsx)("button",{type:"submit",children:" Add a review "})]})]})}}]),n}(a.Component),R=Object(d.f)(A),F=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={complete:!1},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{children:[this.state.complete?Object(f.jsx)("h4",{children:"Update your Profile! "}):null,Object(f.jsx)("div",{children:this.username}),Object(f.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(f.jsx)("input",{name:"country",type:"text",placeholder:"Enter country"}),Object(f.jsx)("input",{name:"favorite",type:"text",placeholder:"Your favorite cuisine"}),Object(f.jsx)("input",{name:"profileimage",type:"file"}),Object(f.jsx)("button",{type:"submit",children:"Add Profile"})]})]})}}]),n}(a.Component),E=n(97),M=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={reviews:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.restaurantId;b.a.get("".concat(p,"/api/reviews"),{withCredentials:!0,params:{restaurantId:t}}).then((function(t){e.setState({reviews:t.data}),console.log("Its passing through here")})).catch((function(e){console.log("Something went wrong",e)}))}},{key:"render",value:function(){var e=this.state.reviews,t=this.props;t.loggedInUser,t.username;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:" Reviews "}),e.map((function(t){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:" Reviews "}),e.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[" User: ",e.userId.username," "]}),Object(f.jsx)("img",{src:e.userId.profileimage,alt:"profileImage"}),Object(f.jsxs)("div",{children:[" ",e.title," "]}),Object(f.jsxs)("div",{children:[" ",e.description," "]}),Object(f.jsxs)("div",{children:[" ",e.rating," ",Object(f.jsx)(C.a,{height:"10px",color:"blue"})," "]}),Object(f.jsx)("img",{src:e.image,alt:e.title,class:"img"})]})}))]})}))]})}}]),n}(a.Component),B=n(93),_=n(94),T=n(100),z=n(95),W=n(96),Y=(n(85),n(20)),H=n.n(Y);function J(e){return Object(B.a)().setView([e.position.latitude,e.position.longitude],13),null}var G=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=["".concat(this.props.location.coordinates.latitude),"".concat(this.props.location.coordinates.longitude)],t=new H.a.icon({iconUrl:"../images/restaurant-icon.png",iconSize:[32,45]});return console.log(e),Object(f.jsx)("div",{children:Object(f.jsxs)(_.a,{style:{width:"800px",height:"500px"},center:e,zoom:20,children:[Object(f.jsx)(J,{position:this.props.location.coordinates}),Object(f.jsx)(T.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(f.jsx)(z.a,{icon:t,position:e,children:Object(f.jsxs)(W.a,{children:[' "',this.props.location.name,'" ']})})]})})}}]),n}(a.Component),V=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={restaurantDetails:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.restaurantId;b.a.get("".concat(p,"/api/businesses/").concat(t),{withCredentials:!0}).then((function(t){e.setState({restaurantDetails:t.data})})).catch((function(e){console.log("Detail fetch failed")}))}},{key:"render",value:function(){var e=this.state.restaurantDetails,t=this.props.match.params.restaurantId;return e?Object(f.jsxs)("div",{children:[Object(f.jsx)(m.b,{to:"/businesses",children:"Back to Restaurants"}),Object(f.jsxs)("div",{children:[" Name of the restaurant: ",e.name," "]}),Object(f.jsx)("img",{class:"img",src:e.image_url}),e.photos.slice(1,3).map((function(e){return Object(f.jsx)("img",{class:"img",src:e})})),Object(f.jsxs)("div",{children:[" Category: ",e.categories[0].title]}),Object(f.jsxs)("div",{children:[" ","Location: ",e.location.city," |"," ",e.location.address1]}),Object(f.jsxs)("div",{children:[" Price range: ",e.price]}),Object(f.jsxs)("div",{children:[" ","Rating: ",e.rating," ",Object(f.jsx)(C.a,{height:"10px",color:"blue"})]}),Object(f.jsxs)("div",{children:[" Telephone number: ",e.phone]}),Object(f.jsxs)("a",{href:e.url,children:[" ","Website",Object(f.jsx)(E.a,{height:"10px"})]}),Object(f.jsx)(m.b,{to:"/businesses/".concat(t,"/add-review"),children:Object(f.jsx)("div",{children:" Write a review "})}),Object(f.jsx)(M,{restaurantId:t}),Object(f.jsx)(G,{location:e})]}):"Loading..."}}]),n}(a.Component),q=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={restaurants:[],loggedInUser:null,error:null,reviews:[],filteredProfile:[],user:[],showForm:!1,fetching:!0},e.handleSubmitProfile=function(t){t.preventDefault();var n=t.target.country.value,a=t.target.favorite.value,i=t.target.profileimage.files[0],r=new FormData;r.append("imageUrl",i),b.a.post("".concat(p,"/api/upload"),r).then((function(t){b.a.patch("".concat(p,"/api/user"),{country:n,favorite:a,profileimage:t.data.image},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/profile")}))}))})).catch((function(e){console.log("Update failed",e)}))},e.handleDelete=function(t){b.a.delete("".concat(p,"/api/user/").concat(t)).then((function(){var n=e.state.user.filter((function(e){return e._id!==t}));e.setState({user:n},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Delete failed",e)}))},e.handleSignUp=function(t){t.preventDefault();var n={username:t.target.username.value,email:t.target.email.value,password:t.target.password.value};b.a.post("".concat(p,"/api/signup"),n).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/signin")}))})).catch((function(t){e.setState({error:t.response.data})}))},e.handleSignIn=function(t){t.preventDefault();var n={email:t.target.email.value,password:t.target.password.value};b.a.post("".concat(p,"/api/signin"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/businesses")}))})).catch((function(t){e.setState({error:t.response.data})}))},e.handleLogout=function(t){b.a.post("".concat(p,"/api/logout"),{},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Something went wrong",e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(p,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data,fetching:!1})})).catch((function(){console.log("Detail fecth failed"),e.setState({fetching:!1})})),this.state.loggedInUser||b.a.get("".concat(p,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loggedInUser,a=t.error;return t.fetching?Object(f.jsx)("p",{children:"Loading App.js"}):Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(x,{onLogout:this.handleLogout,user:n}),Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"/signin",render:function(t){return Object(f.jsx)(y,Object(c.a)({error:a,onSignIn:e.handleSignIn},t))}}),Object(f.jsx)(d.a,{path:"/signup",render:function(t){return Object(f.jsx)(v,Object(c.a)({error:a,onSignUp:e.handleSignUp},t))}}),Object(f.jsx)(d.a,{path:"/profile",render:function(e){return Object(f.jsx)(D,Object(c.a)({},e))}}),Object(f.jsx)(d.a,{exact:!0,path:"/businesses",component:L}),Object(f.jsx)(d.a,{exact:!0,path:"/businesses/:restaurantId/add-review",render:function(){return Object(f.jsx)(R,{onAdd:e.handleSubmit})}}),Object(f.jsx)(d.a,{path:"/user",render:function(t){return Object(f.jsx)(F,Object(c.a)({onAdd:e.handleSubmitProfile,onDelete:e.handleDelete},t))}}),Object(f.jsx)(d.a,{exact:!0,path:"/businesses/:restaurantId",component:V})]})]})}}]),n}(a.Component),K=Object(d.f)(q);s.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(K,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.a5383436.chunk.js.map